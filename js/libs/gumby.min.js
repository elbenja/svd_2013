!function(){"use strict";function Gumby(){this.jQuerydom=jQuery(document);this.isOldie=!!this.jQuerydom.find("html").hasClass("oldie");this.click="click";this.onReady=this.onOldie=this.onTouch=false;this.uiModules={};this.inits={}}Gumby.prototype.init=function(){this.initUIModules();var scope=this;this.jQuerydom.ready(function(){if(scope.onReady){scope.onReady()}if(scope.isOldie&&scope.onOldie){scope.onOldie()}if(Modernizr.touch&&scope.onTouch){scope.onTouch()}})};Gumby.prototype.ready=function(code){if(code&&typeof code==="function"){this.onReady=code}};Gumby.prototype.oldie=function(code){if(code&&typeof code==="function"){this.onOldie=code}};Gumby.prototype.touch=function(code){if(code&&typeof code==="function"){this.onTouch=code}};Gumby.prototype.debug=function(){return{jQuerydom:this.jQuerydom,isOldie:this.isOldie,uiModules:this.uiModules,click:this.click}};Gumby.prototype.selectAttr=function(){var i=0;for(;i<arguments.length;i++){var attr=arguments[i],dataAttr="data-"+arguments[i],gumbyAttr="gumby-"+arguments[i];if(this.attr(dataAttr)){return this.attr(dataAttr)}else if(this.attr(gumbyAttr)){return this.attr(gumbyAttr)}else if(this.attr(attr)){return this.attr(attr)}}return false};Gumby.prototype.addInitalisation=function(ref,code){this.inits[ref]=code};Gumby.prototype.initialize=function(ref){if(this.inits[ref]&&typeof this.inits[ref]==="function"){this.inits[ref]()}};Gumby.prototype.UIModule=function(data){var module=data.module;this.uiModules[module]=data};Gumby.prototype.initUIModules=function(){var x;for(x in this.uiModules){this.uiModules[x].init()}};window.Gumby=new Gumby}();!function(){"use strict";function Checkbox(jQueryel){this.jQueryel=jQueryel;var scope=this;this.jQueryel.on(Gumby.click,function(e){scope.click(e)}).on("gumby.check",function(){scope.update(true)}).on("gumby.uncheck",function(){scope.update(false)});if(scope.jQueryel.hasClass("checked")){scope.update(true)}}Checkbox.prototype.click=function(e){var jQuerytarget=jQuery(e.target);e.stopPropagation();e.preventDefault();if(this.jQueryel.hasClass("checked")){this.update(false)}else{this.update(true)}};Checkbox.prototype.update=function(check){if(check){this.jQueryel.find("input").prop("checked",true).end().addClass("checked").append('<i class="icon-check" />').trigger("gumby.onCheck").trigger("gumby.onChange")}else{this.jQueryel.find("input").prop("checked",false).end().find("i").remove().end().removeClass("checked").trigger("gumby.onUncheck").trigger("gumby.onChange")}};Gumby.addInitalisation("checkboxes",function(){jQuery(".checkbox").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isCheckbox")){return true}jQuerythis.data("isCheckbox",true);new Checkbox(jQuerythis)})});Gumby.UIModule({module:"checkbox",events:["onCheck","onUncheck","onChange","check","uncheck"],init:function(){Gumby.initialize("checkboxes")}})}();!function(){"use strict";function Fixed(jQueryel){this.jQueryel=jQueryel;this.jQueryholder=Gumby.selectAttr.apply(this.jQueryel,["holder"]);this.fixedPoint=Gumby.selectAttr.apply(this.jQueryel,["fixed"]);this.unfixPoint=false;if(this.jQueryholder){this.jQueryholder=jQuery(this.jQueryholder)}else{this.jQueryholder=jQuery(window)}if(this.fixedPoint.indexOf("|")>-1){var points=this.fixedPoint.split("|");this.fixedPoint=points[0];this.unfixPoint=points[1]}this.fixedPoint=this.parseAttrValue(this.fixedPoint);if(this.unfixPoint){this.unfixPoint=this.parseAttrValue(this.unfixPoint)}var scope=this;this.jQueryholder.scroll(function(){scope.scroll()})}Fixed.prototype.scroll=function(){var offset=this.jQueryholder.scrollTop(),fixedPoint=this.fixedPoint,unfixPoint=this.unfixPoint,endPoint=this.endPoint;fixedPoint=fixedPoint instanceof jQuery?this.fixedPoint.offset().top:this.fixedPoint;unfixPoint=unfixPoint instanceof jQuery?this.unfixPoint.offset().top:this.unfixPoint;if(!unfixPoint){unfixPoint=offset*2}if(offset>=fixedPoint&&offset<unfixPoint&&!this.jQueryel.hasClass("fixed")){this.jQueryel.addClass("fixed").trigger("gumby.onFixed")}else if(offset<=fixedPoint&&this.jQueryel.hasClass("fixed")){this.jQueryel.removeClass("fixed").trigger("gumby.onUnfixed",0)}if(unfixPoint&&offset>=unfixPoint&&this.jQueryel.hasClass("fixed")){this.jQueryel.removeClass("fixed").trigger("gumby.onUnfixed",1)}};Fixed.prototype.parseAttrValue=function(attr){if(jQuery.isNumeric(attr)){return Number(attr)}else if(attr==="top"){return this.jQueryel.offset().top}else{var jQueryel=jQuery(attr);return jQueryel.length?jQueryel:false}};Gumby.addInitalisation("fixed",function(){jQuery("[data-fixed],[gumby-fixed],[fixed]").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isFixed")){return true}jQuerythis.data("isFixed",true);new Fixed(jQuerythis)})});Gumby.UIModule({module:"fixed",events:["onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}();!function(){"use strict";if(!Modernizr.touch){return}function Navbar(jQueryel){this.jQueryel=jQueryel;var scope=this;this.jQueryel.find("li").on(Gumby.click,function(e){var jQuerythis=jQuery(this);e.stopPropagation();if(this.href==="#"){e.preventDefault()}scope.dropdown(jQuerythis)})}Navbar.prototype.dropdown=function(jQuerythis){if(jQuerythis.children(".dropdown").length){if(jQuerythis.hasClass("active")){jQuerythis.removeClass("active")}else{jQuerythis.addClass("active")}}else{this.jQueryitems.removeClass("active")}};Gumby.addInitalisation("navbars",function(){jQuery(".navbar").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isNavbar")){return true}jQuerythis.data("isNavbar",true);new Navbar(jQuerythis)})});Gumby.UIModule({module:"navbar",events:[],init:function(){Gumby.initialize("navbars")}})}();!function(){"use strict";function RadioBtn(jQueryel){this.jQueryel=jQueryel;var scope=this;this.jQueryel.on(Gumby.click,function(e){scope.click(e)}).on("gumby.check",function(){scope.update()});if(scope.jQueryel.hasClass("checked")){scope.update()}}RadioBtn.prototype.click=function(e){var jQuerytarget=jQuery(e.target);e.stopPropagation();e.preventDefault();this.update()};RadioBtn.prototype.update=function(){var jQueryinput=this.jQueryel.find("input[type=radio]"),group='input[name="'+jQueryinput.attr("name")+'"]';jQuery(".radio").has(group).removeClass("checked").find("input").prop("checked",false).end().find("i").remove();jQueryinput.prop("checked",true);this.jQueryel.append('<i class="icon-dot" />').addClass("checked").trigger("gumby.onChange")};Gumby.addInitalisation("radiobtns",function(){jQuery(".radio").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isRadioBtn")){return true}jQuerythis.data("isRadioBtn",true);new RadioBtn(jQuerythis)})});Gumby.UIModule({module:"radiobtn",events:["onChange","check"],init:function(){Gumby.initialize("radiobtns")}})}();!function(){"use strict";function Retina(jQueryel){this.jQueryel=jQueryel;this.imageSrc=this.jQueryel.attr("src");this.retinaSrc=this.fetchRetinaImage();this.jQueryretinaImg=jQuery(new Image);var scope=this;if(!this.retinaSrc){return false}this.jQueryretinaImg.attr("src",this.retinaSrc).load(function(){scope.retinaImageLoaded()})}Retina.prototype.fetchRetinaImage=function(){var imgSrc=this.imageSrc,index=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)jQuery/i);if(index<0){return false}return imgSrc.substr(0,index)+"@2x"+imgSrc.substr(index,imgSrc.length)};Retina.prototype.retinaImageLoaded=function(){this.jQueryel.attr("src",this.jQueryretinaImg.attr("src")).trigger("gumby.onRetina")};Gumby.addInitalisation("retina",function(){if(!window.devicePixelRatio||window.devicePixelRatio<=1){return}jQuery("img[data-retina],img[gumby-retina],img[retina]").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isRetina")){return true}jQuerythis.data("isRetina",true);new Retina(jQuerythis)})});Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}();!function(){"use strict";function SkipLink(jQueryel){this.jQueryel=jQueryel;this.targetPos=0;this.duration=Number(Gumby.selectAttr.apply(this.jQueryel,["duration"]))||200;this.offset=Gumby.selectAttr.apply(this.jQueryel,["offset"])||false;this.easing=Gumby.selectAttr.apply(this.jQueryel,["easing"])||"swing";var scope=this;this.jQueryel.on(Gumby.click+" gumby.skip",function(e){e.preventDefault();scope.calculateTarget()})}SkipLink.prototype.calculateTarget=function(){var scope=this,target=Gumby.selectAttr.apply(this.jQueryel,["goto"]),jQuerytarget;if(target=="top"){this.targetPos=0}else if(jQuery.isNumeric(target)){this.targetPos=Number(target)}else{jQuerytarget=jQuery(target);if(!jQuerytarget){return false}this.targetPos=jQuerytarget.offset().top}this.skipTo()};SkipLink.prototype.skipTo=function(){var scope=this;jQuery("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){scope.jQueryel.trigger("gumby.onComplete")})};SkipLink.prototype.calculateOffset=function(){if(!this.offset){return this.targetPos}var op=this.offset.substr(0,1),off=Number(this.offset.substr(1,this.offset.length));if(op==="-"){return this.targetPos-off}else if(op==="+"){return this.targetPos+off}};Gumby.addInitalisation("skiplinks",function(){jQuery(".skiplink > a, .skip").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isSkipLink")){return true}jQuerythis.data("isSkipLink",true);new SkipLink(jQuerythis)})});Gumby.UIModule({module:"skiplink",events:["onComplete","skip"],init:function(){Gumby.initialize("skiplinks")}})}();!function(){"use strict";function Tabs(jQueryel){this.jQueryel=jQueryel;this.jQuerynav=this.jQueryel.find("ul.tab-nav > li");this.jQuerycontent=this.jQueryel.find(".tab-content");var scope=this;this.jQuerynav.children("a").on(Gumby.click,function(e){e.preventDefault();scope.click(jQuery(this))});this.jQueryel.on("gumby.set",function(e,index){scope.set(e,index)})}Tabs.prototype.click=function(jQuerythis){var index=jQuerythis.parent().index();this.jQuerynav.add(this.jQuerycontent).removeClass("active");this.jQuerynav.eq(index).add(this.jQuerycontent.eq(index)).addClass("active");this.jQueryel.trigger("gumby.onChange",index)};Tabs.prototype.set=function(e,index){this.jQuerynav.eq(index).find("a").trigger(Gumby.click)};Gumby.addInitalisation("tabs",function(){jQuery(".tabs").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isTabs")){return true}jQuerythis.data("isTabs",true);new Tabs(jQuerythis)})});Gumby.UIModule({module:"tabs",events:["onChange","set"],init:function(){Gumby.initialize("tabs")}})}();!function(){"use strict";function Toggle(jQueryel){this.jQueryel=jQuery(jQueryel);this.targets=[];this.on="";if(this.jQueryel.length){this.init()}}function Switch(jQueryel){this.jQueryel=jQuery(jQueryel);this.targets=[];this.on="";if(this.jQueryel.length){this.init()}}Toggle.prototype.init=function(){this.targets=this.parseTargets();this.on=Gumby.selectAttr.apply(this.jQueryel,["on"])||Gumby.click;var scope=this;this.jQueryel.on(this.on,function(e){if(jQuery(this).prop("tagName")==="A"){e.preventDefault()}e.stopPropagation();scope.trigger(scope.triggered)}).on("gumby.trigger",function(){scope.trigger(scope.triggered)})};Toggle.prototype.parseTargets=function(){var targetStr=Gumby.selectAttr.apply(this.jQueryel,["trigger"]),secondaryTargets=0,targets=[];if(!targetStr){return false}secondaryTargets=targetStr.indexOf("|");if(secondaryTargets===-1){return[jQuery(targetStr)]}targets=targetStr.split("|");return targets.length>1?[jQuery(targets[0]),jQuery(targets[1])]:[jQuery(targets[0])]};Toggle.prototype.triggered=function(){this.jQueryel.trigger("gumby.onTrigger",[this.jQueryel.hasClass("active")])};Switch.prototype=new Toggle;Toggle.prototype.trigger=function(cb){if(!this.targets){this.jQueryel.toggleClass("active")}else if(this.targets.length==1){this.jQueryel.add(this.targets[0]).toggleClass("active")}else if(this.targets.length>1){if(this.targets[0].hasClass("active")){this.jQueryel.add(this.targets[0]).removeClass("active");this.targets[1].addClass("active")}else{this.targets[1].removeClass("active");this.jQueryel.add(this.targets[0]).addClass("active")}}if(cb&&typeof cb==="function"){cb.apply(this)}};Switch.prototype.trigger=function(cb){if(!this.targets){this.jQueryel.addClass("active")}else if(this.targets.length==1){this.jQueryel.add(this.targets[0]).addClass("active")}else if(this.targets.length>1){this.jQueryel.add(this.targets[0]).addClass("active");this.targets[1].removeClass("active")}if(cb&&typeof cb==="function"){cb.apply(this)}};Gumby.addInitalisation("toggles",function(){jQuery(".toggle").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isToggle")){return true}jQuerythis.data("isToggle",true);new Toggle(jQuerythis)})});Gumby.addInitalisation("switches",function(){jQuery(".switch").each(function(){var jQuerythis=jQuery(this);if(jQuerythis.data("isSwitch")){return true}jQuerythis.data("isSwitch",true);new Switch(jQuerythis)})});Gumby.UIModule({module:"toggleswitch",events:["trigger","onTrigger"],init:function(){Gumby.initialize("switches");Gumby.initialize("toggles")}})}();!function(jQuery){"use strict";function Validation(jQuerythis,req){this.jQuerythis=jQuerythis;this.jQueryfield=this.jQuerythis.parents(".field");this.req=req||function(){return!!this.jQuerythis.val().length};var scope=this;if(this.jQuerythis.is("[type=checkbox], [type=radio]")){this.jQueryfield=this.jQuerythis.parent("label");this.jQueryfield.on("gumby.onChange",function(){scope.validate()})}else if(this.jQuerythis.is("select")){this.jQueryfield=this.jQuerythis.parents(".picker");this.jQueryfield.on("change",function(){scope.validate()})}else{this.jQuerythis.on("blur",function(e){if(e.which!==9){scope.validate()}})}}Validation.prototype.validate=function(){var result=this.req(this.jQuerythis);if(!result){this.jQueryfield.removeClass("success").addClass("danger")}else{this.jQueryfield.removeClass("danger").addClass("success")}return result};jQuery.fn.validation=function(options){var settings=jQuery.extend({submit:false,fail:false,required:[]},options),validations=[];return this.each(function(){if(!settings.required.length){return false}var jQuerythis=jQuery(this),reqLength=settings.required.length,i;for(i=0;i<reqLength;i++){validations.push(new Validation(jQuerythis.find('[name="'+settings.required[i].name+'"]'),settings.required[i].validate||false))}jQuerythis.on("submit",function(e){var failed=false;if(!jQuerythis.data("passed")){e.preventDefault();var reqLength=validations.length,i;for(i=0;i<reqLength;i++){if(!validations[i].validate()){failed=true}}if(!failed){if(settings.submit&&typeof settings.submit==="function"){settings.submit(jQuerythis.serializeArray());return}jQuerythis.data("passed",true).submit()}else{if(settings.fail&&typeof settings.fail==="function"){settings.fail();return}}}})})}}(jQuery);Modernizr.load({test:Modernizr.touch,yep:"js/libs/jquery.mobile.custom.min.js",callback:function(url,result,key){if(jQuery.mobile){window.Gumby.click="tap"}},complete:function(){window.Gumby.init();if(typeof define=="function"&&define.amd){define(window.Gumby)}}});